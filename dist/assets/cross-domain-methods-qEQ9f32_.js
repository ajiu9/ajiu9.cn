import{u as n,c as e,w as i,_ as p,o as r,a as s,b as a}from"./app-Neii0Vw3.js";const d=s("div",{class:"prose m-auto slide-enter-content"},[s("h4",{id:"什么是同源策略及限制",tabindex:"-1"},[a("什么是同源策略及限制 "),s("a",{class:"header-anchor",href:"#什么是同源策略及限制","aria-hidden":"true"},"#")]),s("p",null,"同源策略，它是由Netscape提出的一个著名的安全策略，现在所有支持JavaScript 的浏览器都会使用这个策略。限制从一个源加载的文档或脚本如何与来自另一个源的资源进行交互。这是一个用于隔离潜在恶意文件的关键的安全机制。 所谓同源是指，域名，协议，端口（http协议的默认端口是80）相同。 例如一个浏览器的两个tab页中分别打开来百度和谷歌的页面，当浏览器的百度tab页执行一个脚本的时候会检查这个脚本是属于哪个页面的，即检查是否同源，只有和百度同源的脚本才会被执行。如果非同源，那么在请求数据时，浏览器会在控制台中报一个异常，提示拒绝访问。"),s("p",null,"限制："),s("ul",null,[s("li",null,[s("p",null,"Cookie、LocalStorage和IndexDB无法获取。")]),s("li",null,[s("p",null,"无法获取和操作DOM。")]),s("li",null,[s("p",null,"不能发送Ajax请求。")])]),s("h4",{id:"前后端如何通信",tabindex:"-1"},[a("前后端如何通信 "),s("a",{class:"header-anchor",href:"#前后端如何通信","aria-hidden":"true"},"#")]),s("ul",null,[s("li",null,[s("p",null,"Ajax：同源下的通信方式。")]),s("li",null,[s("p",null,"WebSocket：不受同源策略的限制，支持跨域。")]),s("li",null,[s("p",null,"CORS： CORS是跨源资源分享（Cross-Origin Resource Sharing）的缩写。它是W3C标准，是跨源AJAX请求的根本解决方法。相比JSONP只能发GET请求，CORS允许任何类型的请求。")])]),s("h4",{id:"如何创建ajax",tabindex:"-1"},[a("如何创建Ajax "),s("a",{class:"header-anchor",href:"#如何创建ajax","aria-hidden":"true"},"#")]),s("p",null,"需要知道以下几点："),s("ul",null,[s("li",null,[s("p",null,"XMLHttpRequest的工作原理")]),s("li",null,[s("p",null,"兼容性处理（XMLHttpRequest只在高版本的浏览器支持）")]),s("li",null,[s("p",null,"事件的触发条件")]),s("li",null,[s("p",null,"事件的触发顺序")])]),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"util"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"ajax"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"options"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"  const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," opt"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," Object"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"assin"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"({")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"    url"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," ''"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"    ype"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"get"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"    data"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {},")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"    success"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"()"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {},")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"    error"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"()"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {},")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"  },"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," options"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"  if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"opt"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"url"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"    // 兼容性处理")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"    const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," xhr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," XMLHttpRequest")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"      ?"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," new"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," XMLHttpRequest"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"()")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"      :"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," new"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," ActiveXObject"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"Microsoft.XMLHTTP"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"    const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," data"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," opt"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"data")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"    let"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," url"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," opt"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"url")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"    const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," type"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," opt"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"type"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"toUpperCase"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"()")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"    const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," dataArr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," []")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"    for"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," k"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," in"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," data"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"      dataArr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"push"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"`"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"${"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"k"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"${"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"data"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"["),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"k"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"`"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"    if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"type"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," ==="),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"GET"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"      url"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," `"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"${"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"url"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"?"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"${"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"dataArr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"join"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"&"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"`")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"      xhr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"open"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"type"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," url"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"replace"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"/"),s("span",{style:{"--s-dark":"#E6CC77","--s-light":"#BDA437"}},"\\?"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"$"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"/"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"g"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," ''"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"),"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}}," true"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"      xhr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"send"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"()")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"    }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"    if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"type"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," ==="),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"POST"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"      xhr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"open"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"type"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," url"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}}," true"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"      xmlhttp"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"setRequestHeader"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"Content-type"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"application/x-www-form-urlencoded"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"      xhr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"send"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"dataArr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"join"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"&"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"))")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"    }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"    xhr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"onload"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ()"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"      if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"xhr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"status"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," ==="),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 200"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," ||"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," xhr"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," ==="),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 304"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"        var"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," res")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"        if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"opt"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"success"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," &&"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," opt"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"success"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," instanceof"),s("span",{style:{"--s-dark":"#5DA994","--s-light":"#2E8F82"}}," Function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"          res"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," xhr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"responseText")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"          if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"typeof"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," res"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," ==="),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"string"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"            res"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," JSON"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"parse"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"res"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"            opt"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"success"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"call"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"xhr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," res"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"          }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"        }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"      }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"      else"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"        if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"opt"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"error"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," &&"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," opt"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"error"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," instanceof"),s("span",{style:{"--s-dark":"#5DA994","--s-light":"#2E8F82"}}," Function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"          opt"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"error"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"call"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"xhr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," res"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"      }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"    }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"  }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}")]),a(`
`),s("span",{class:"line"})])]),s("h4",{id:"跨域通信的几种方式",tabindex:"-1"},[a("跨域通信的几种方式 "),s("a",{class:"header-anchor",href:"#跨域通信的几种方式","aria-hidden":"true"},"#")]),s("ul",null,[s("li",null,"jsonp"),s("li",null,"Hash"),s("li",null,"webSocket"),s("li",null,"postMessage"),s("li",null,"CORS")]),s("p",null,[s("strong",null,"1.jsonp"),a(" jsonp原理： 通过"),s("code",null,"<script>"),a("标签的异步加载来实现。例如在"),s("code",null,"<head>"),a("标签中通过"),s("code",null,"<script>"),a("中的url加载的js。")]),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"/**")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"* [function 拼接url]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"* "),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"@"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"param"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"  {"),s("span",{style:{"--s-dark":"#5DA994","--s-light":"#2E8F82"}},"[Object]]"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," data"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}}," [description]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"* "),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"@"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"return"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#5DA994","--s-light":"#2E8F82"}},"[value=key&value1=key1]"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}}," [description]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"*/"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"var"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," util"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {}")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"util"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"param"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"data"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"  var"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," url"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," ''")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"  for"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"var"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," k"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," in"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," data"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"    let"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," value"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," data"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"["),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"k"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," !=="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," undefined"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," ?"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," data"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"["),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"k"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," :"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," ''")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"    url"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," +="),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," `"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"&"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"${"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"k"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"${"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"encodeURIComponent"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"value"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"`")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"  }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"  return"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," url"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," ?"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," url"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"substring"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}},"1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," :"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," ''")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"/**")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"  * [function 判断是否为函数]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"  * "),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"@"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"param"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"  {"),s("span",{style:{"--s-dark":"#5DA994","--s-light":"#2E8F82"}},"[type]"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," source"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}}," [description]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"  * "),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"@"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"return"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#5DA994","--s-light":"#2E8F82"}},"[type]"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"        [description]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"  */")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"util"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"isFunction"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"source"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"  return"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"[object Function]"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," ==="),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}}," Object"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"prototype"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"toString"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"call"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"source"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},");")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"};")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"/**")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"  * [function 获取一个随机的5位字符串]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"  * "),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"@"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"param"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"  {"),s("span",{style:{"--s-dark":"#5DA994","--s-light":"#2E8F82"}},"[type]"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," prefix"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}}," [description]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"  * "),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"@"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"return"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#5DA994","--s-light":"#2E8F82"}},"[type]"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"        [description]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"  */")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," util"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"getName"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"prefix"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"    return"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," prefix"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," +"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," Math"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"random"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"()."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"toString"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}},"36"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"replace"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"/"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"["),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"^"),s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"a-z"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"+"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"/"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"g"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," ''"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"substr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}},"0"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 5"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},");")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"  };")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"/**")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"  * [function 在页面中注入js脚本]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"  * "),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"@"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"param"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"  {"),s("span",{style:{"--s-dark":"#5DA994","--s-light":"#2E8F82"}},"[type]"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," url"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"     [description]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"  * "),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"@"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"param"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"  {"),s("span",{style:{"--s-dark":"#5DA994","--s-light":"#2E8F82"}},"[type]"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," charset"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}}," [description]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"  * "),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"@"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"return"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#5DA994","--s-light":"#2E8F82"}},"[type]"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"         [description]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"  */")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," util"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"createScript"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"url"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," charset"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"  var"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," script"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," document"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"createElement"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"script"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},");")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"  script"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"setAttribute"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"type"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"text/javascript"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},");")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"  charset"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," &&"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," script"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"setAttribute"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"charset"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," charset"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},");")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"  script"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"setAttribute"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"src"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," url"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},");")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"  script"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"async"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}}," true"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},";")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"  return"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," script"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},";")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"};")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"// jsop实现")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"util"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"jsonp"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"url"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," data"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," onsuccess"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," onerror"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," charset"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"  // 第一步，全局注册一个callback回调函数")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"  var"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," callbackName"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," util"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"getName"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"_callback"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},");")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"  window"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"["),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"callbackName"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"()"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"    if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"onsuccess"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," &&"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," onsuccess"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"util"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"isFunction"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"       onsuccess"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"arguments"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"["),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}},"0"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]);")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"    }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"  }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"  // 第二步 动态创建Script标签")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"  url"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," +="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"url"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"indexOf"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"?"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," <"),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 0"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," ?"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"?"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," :"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"&"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," +"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," util"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"param"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"data"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},");")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"  var"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," script"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," util"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"createScript"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"url"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," +"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"&callback="),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," +"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," callbackName"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," charset"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},");")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"  // 第三步 发送script请求")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"  document"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"getElementsByTagName"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"head"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")["),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}},"0"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"appendChild"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"script"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},");")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"  // 第四步 监听函数")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"  script"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"onload"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," script"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"onreadystatechange"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ()"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"    if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"!"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"script"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"readyState"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," ||"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," /"),s("span",{style:{"--s-dark":"#C4704F","--s-light":"#AB5E3F"}},"loaded"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"|"),s("span",{style:{"--s-dark":"#C4704F","--s-light":"#AB5E3F"}},"complete"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"/"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"test"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"script"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"readyState"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"))"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"      script"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"onload"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," script"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"onreadystatechange"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," null"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},";"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"// 移除该script的 DOM 对象")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"      if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"script"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"parentNode"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"        script"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"parentNode"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"removeChild"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"script"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},");")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"      }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"    // 删除函数或变量")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"    window"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"["),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"callbackName"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," null"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},";")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"  }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"};")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"script"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"onerror"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ()"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"  if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"onerror"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," &&"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," util"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"isFunction"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"onerror"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"))"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"    onerror"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"();")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"  }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"};")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}")]),a(`
`),s("span",{class:"line"})])]),s("p",null,"实例："),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"util"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"jsonp"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"https://c.y.qq.com/musichall/fcgi-bin/fcg_yqqhomepagerecommend.fcg"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  g_tk"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 5381"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  inCharset"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"utf-8"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  outCharset"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"utf-8"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  notice"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 0"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  format"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"jsonp"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  platform"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}}," h5"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  uin"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 0"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  needNewCode"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 1")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"},"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ()"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"  console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"arguments"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"})")]),a(`
`),s("span",{class:"line"})])]),s("p",null,[s("strong",null,"2.Hash（片段识别符）"),a(" url的"),s("code",null,"#"),a("后面的内容就叫Hash。Hash的改变，页面不会刷新。这就是用 Hash 做跨域通信的基本原理(url的?后面的内容叫Search。Search的改变，会导致页面刷新)。 实例： 页面A通过iframe或frame嵌入了跨域页面B。 窗口可以把信息，写入子窗口的片段标识符。")]),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"var"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," src"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," originURL"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," +"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"#"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," +"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," data"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},";")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"document"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"getElementById"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"myIFrame"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"src"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," src"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},";")]),a(`
`),s("span",{class:"line"})])]),s("p",null,"子窗口通过监听hashchange事件得到通知。"),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"window"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"onhashchange"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," checkMessage"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},";")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"function"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," checkMessage"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"()"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"var"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," message"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," window"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"location"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"hash"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},";")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"// ...")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}")]),a(`
`),s("span",{class:"line"})])]),s("p",null,"同样的，子窗口也可以改变父窗口的片段标识符。"),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"parent"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"location"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"href"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," target"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," +"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},' "'),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"#"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," +"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," hash"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},";")]),a(`
`),s("span",{class:"line"})])]),s("p",null,[s("strong",null,"3.postMessage"),a(" HTML5引入了一个全新的API：跨文档通信 API（Cross-document messaging）。这个API为window对象新增了一个window.postMessage方法，允许跨窗口通信，不论这两个窗口是否同源。")]),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"// postMessage")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"// 窗口A(http:A.com)向跨域的窗口B(http:B.com)发送信息B")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"window"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"postMessage"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"data"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"http://B.com"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},");")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"// 在窗口B中监听A")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"window"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"addEventListener"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"message"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"event"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"event"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"origin"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")});")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"// 发送消息的窗口console.log(event.source); ")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"// 消息发向的网址console.log(event.data); ")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"// 消息内容}, false);")]),a(`
`),s("span",{class:"line"})])]),s("p",null,[s("strong",null,"4.webSocket"),a(" WebSocket是一种通信协议，使用ws://（非加密）和wss://（加密）作为协议前缀。该协议不实行同源政策，只要服务器支持，就可以通过它进行跨源通信。")]),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"var"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," ws"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," new"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," webSocket"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"wss://echo.websocket.org"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},");")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"ws"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"onopen"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"evt"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"Connection open ..."),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},");")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"ws"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"send"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"Hello WebSockets!"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},");")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"};")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"ws"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"onmessage"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"evt"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},' "'),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"Received Message: "),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," +"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," evt"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"data"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},");")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"ws"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"close"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"();")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"};")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"ws"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"onclose"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"evt"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"Connection closed."),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},'"'),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},");")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"};")]),a(`
`),s("span",{class:"line"})])]),s("blockquote",null,[s("p",null,[a("Websocket【参考资料】"),s("a",{href:"http://www.ruanyifeng.com/blog/2017/05/websocket.html",target:"_blank",rel:"noopener"},"http://www.ruanyifeng.com/blog/2017/05/websocket.html")])]),s("p",null,[s("strong",null,"4.CORS"),a(" CORS是一个W3C标准，全称是”跨域资源共享”（Cross-origin resource sharing）。它允许浏览器向跨源服务器，发出XMLHttpRequest请求，从而克服了AJAX只能同源使用的限制。 跨域时，浏览器会拦截Ajax请求，并在http头中加Origin。")]),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"fetch"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"/some/url/"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  method"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"get"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"})."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"then"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"response"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"  // 请求成功后执行操作")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"})."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"catch"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"err"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"  // 请求失败后执行操作")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"});")]),a(`
`),s("span",{class:"line"})])]),s("p",null,[s("a",{href:"http://www.ruanyifeng.com/blog/2016/04/cors.html",target:"_blank",rel:"noopener"},"CORS【参考资料】")])],-1),B={__name:"cross-domain-methods",setup(h){const l={title:"前端通信类以及跨域的几种方法",lang:"zh",type:"note",date:"2018-09-27T00:00:00.000Z",image:"https://ajiu9.cn/og/cross-domain-methods.png",meta:[{property:"og:title",content:"前端通信类以及跨域的几种方法"},{name:"twitter:title",content:"前端通信类以及跨域的几种方法"},{property:"og:image",content:"https://ajiu9.cn/og/cross-domain-methods.png"},{name:"twitter:image",content:"https://ajiu9.cn/og/cross-domain-methods.png"},{name:"twitter:card",content:"summary_large_image"}]};return n({title:"前端通信类以及跨域的几种方法",meta:[{property:"og:title",content:"前端通信类以及跨域的几种方法"},{name:"twitter:title",content:"前端通信类以及跨域的几种方法"},{property:"og:image",content:"https://ajiu9.cn/og/cross-domain-methods.png"},{name:"twitter:image",content:"https://ajiu9.cn/og/cross-domain-methods.png"},{name:"twitter:card",content:"summary_large_image"}]}),(k,y)=>{const t=p;return r(),e(t,{frontmatter:l},{default:i(()=>[d]),_:1})}}};export{B as default};
