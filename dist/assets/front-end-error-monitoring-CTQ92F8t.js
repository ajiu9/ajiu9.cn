import{u as n,c as e,w as i,_ as r,o as p,a as s,b as t}from"./app-CyFHFJGF.js";const d=s("div",{class:"prose m-auto slide-enter-content"},[s("h4",{id:"写在前面",tabindex:"-1"},[t("写在前面 "),s("a",{class:"header-anchor",href:"#写在前面","aria-hidden":"true"},"#")]),s("p",null,"做好错误监控，将用户使用时的错误上报，可以帮助我们定位解决一些出现的问题。本次主要了解一下几个问题：前端错误的分类，每一种分类的错误捕获方式是什么，如何把这些错误上报？"),s("h3",{id:"前端错误分类",tabindex:"-1"},[t("前端错误分类 "),s("a",{class:"header-anchor",href:"#前端错误分类","aria-hidden":"true"},"#")]),s("ul",null,[s("li",null,"即时运行错误：代码错误"),s("li",null,"资源加载错误"),s("li",null,"接口错误 即时运行错误的捕获方式："),s("li",null,[s("code",null,"try..catch")]),s("li",null,[s("code",null,"window.onerror")])]),s("p",null,"资源加载错误的捕获方式："),s("ul",null,[s("li",null,[s("code",null,"object.onerror")]),s("li",null,[s("code",null,"performance.getEntries()")]),s("li",null,[s("code",null,'addEventListener("error",function{}, true)'),t("error事件捕获（资源加载错误不会冒泡，所以window.onerror不能捕获资源加载错误）。")])]),s("p",null,[t("接口错误捕获方式 所有http请求都是基于"),s("code",null,"xmlHttpRequest"),t("或者"),s("code",null,"fetch"),t("封装的。所以要捕获全局的接口错误，方法就是封装xmlHttpRequest或者fetch。 这个捕获可以用状态码作为出错条件处理")]),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"function"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," axios"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"()"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"  if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"!"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"window"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"XMLHttpRequest"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"    return")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"  const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," xmlhttp"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," window"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"XMLHttpRequest")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"  _oldSend"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}}," xmlhttp"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"prototype"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"send")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"  const"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," _handleEvent"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"event"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"    if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"event"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," &&"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," event"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"currentTarget"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," &&"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," event"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"currentTarget"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"status"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," !=="),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 200"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"      // 自定义错误上报")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"    }")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"  }")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  xmlhttp"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"prototype"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"send"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ()"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"    if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"this"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"addEventListener"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"      this"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"addEventListener"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"error"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," _handleEvent"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"      this"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"addEventListener"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"load"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," _handleEvent"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"      this"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"addEventListener"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"abort"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," _handleEvent"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"    }")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"    else"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"      const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," _oldStateChange"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}}," this"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"onreadystatechange")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"      this"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"onreadystatechange"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"event"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"        if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"this"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"readyState"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," ==="),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 4"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"          _handleEvent"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"event"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),t(`
`),s("span",{class:"line"}),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"        _oldStateChange"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," &&"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," _oldStateChange"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"apply"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"this"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}}," arguments"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"      }")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"    }")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"    return"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," _oldSend"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"apply"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"this"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}}," arguments"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"  }")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}")]),t(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"function"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," axios"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"()"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"  if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"!"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"window"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"fetch"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"    return")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"  const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," _oldFetch"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," window"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"fetch")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"  window"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"fetch"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ()"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"    return"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," _oldFetch"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"apply"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"this"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}}," arguments"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"      ."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"then"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"(("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"res"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," =>"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"        if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"!"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"res"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"ok"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"          // True if status is HTTP 2xx")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"          // 上报错误")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"        }")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"        return"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," res")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"      })")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"      ."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"catch"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"(("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"error"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," =>"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"        // 上报错误throw error;")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"      })")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"  }")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}")]),t(`
`),s("span",{class:"line"})])]),s("p",null,"跨域的js运行错误捕获错误提示："),s("p",null,[s("img",{src:"https://static.ajiu9.cn/images/20240316133018d6be9j.png",alt:"图片"})]),s("p",null,"处理方法："),s("ul",null,[s("li",null,"在script标签中增加crossorigin属性。"),s("li",null,"设置js资源响应头Access-Control-Allow-Origin。")]),s("h4",{id:"上报错误的基本原理",tabindex:"-1"},[t("上报错误的基本原理 "),s("a",{class:"header-anchor",href:"#上报错误的基本原理","aria-hidden":"true"},"#")]),s("ul",null,[s("li",null,"采用Ajax通信的方式上报。"),s("li",null,"利用Image对象上报")]),s("p",null,"推荐用Image对象上报错误类型，比Ajax方式简单，并且不用借助任何第三方库。"),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"new"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," Image"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"())."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"src"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"http://baidu.com/error?err=error"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'")]),t(`
`),s("span",{class:"line"})])])],-1),B={__name:"front-end-error-monitoring",setup(h){const a={title:"前端错误监控",lang:"zh",date:"2018-10-18T00:00:00.000Z",type:"note",image:"https://ajiu9.cn/og/front-end-error-monitoring.png",meta:[{property:"og:title",content:"前端错误监控"},{name:"twitter:title",content:"前端错误监控"},{property:"og:image",content:"https://ajiu9.cn/og/front-end-error-monitoring.png"},{name:"twitter:image",content:"https://ajiu9.cn/og/front-end-error-monitoring.png"},{name:"twitter:card",content:"summary_large_image"}]};return n({title:"前端错误监控",meta:[{property:"og:title",content:"前端错误监控"},{name:"twitter:title",content:"前端错误监控"},{property:"og:image",content:"https://ajiu9.cn/og/front-end-error-monitoring.png"},{name:"twitter:image",content:"https://ajiu9.cn/og/front-end-error-monitoring.png"},{name:"twitter:card",content:"summary_large_image"}]}),(y,k)=>{const l=r;return p(),e(l,{frontmatter:a},{default:i(()=>[d]),_:1})}}};export{B as default};
