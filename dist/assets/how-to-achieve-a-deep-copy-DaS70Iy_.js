import{u as n,c as e,w as i,_ as p,o as r,a as s,b as a}from"./app-BROb2cwE.js";const g=s("div",{class:"prose m-auto slide-enter-content"},[s("p",null,"在 JavaScript 的编程中经常需要对数据进行复制，什么时候用深拷贝、什么时候用浅拷贝？ 拷贝一个很多嵌套的对象怎么实现？ 写成什么样的深拷贝代码才能算合格？"),s("h3",{id:"浅拷贝的原理和实现",tabindex:"-1"},[a("浅拷贝的原理和实现 "),s("a",{class:"header-anchor",href:"#浅拷贝的原理和实现","aria-hidden":"true"},"#")]),s("p",null,"对于浅拷贝的定义我们可以初步理解为："),s("blockquote",null,[s("p",null,"自己创建一个新的对象，来接受你要重新复制或引用的对象值。如果对象属性是基本的数据类型，复制的就是基本类型的值给新对象；但如果属性是引用数据类型，复制的就是内存中的地址，如果其中一个对象改变了这个内存中的地址，肯定会影响到另一个对象。")]),s("p",null,"下面总结了一些 JavaScript 提供的浅拷贝方法，一起来看看哪些方法能实现上述定义所描述的过程。"),s("h4",{id:"方法一：object-assign",tabindex:"-1"},[a("方法一：object.assign "),s("a",{class:"header-anchor",href:"#方法一：object-assign","aria-hidden":"true"},"#")]),s("p",null,"object.assign 是 ES6 中 object 的一个方法，该方法可以用于 JS 对象的合并等多个用途，其中一个用途就是可以进行浅拷贝。该方法的第一个参数是拷贝的目标对象，后面的参数是拷贝的来源对象（也可以是多个来源）。"),s("blockquote",null,[s("p",null,[s("code",null,"**Object.assign()**"),a("方法用于将所有可枚举属性的值从一个或多个源对象分配到目标对象。它将返回目标对象。")])]),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," target"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {}")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," source"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}}," a"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}}," b"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," }"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"Object"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"assign"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"target"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," source"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"target"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}}," // { a: { b: 1 } };")]),a(`
`),s("span",{class:"line"})])]),s("p",null,"从上面的代码中可以看到，通过 object.assign 简单实现了一个浅拷贝，“target”就是新拷贝的对象，下面再看一个和上面不太一样的例子。"),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," target"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {}")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," source"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}}," a"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}}," b"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," }"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"Object"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"assign"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"target"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," source"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"target"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}}," // { a: { b: 10 } };")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"source"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"a"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"b"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 10")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"source"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}}," // { a: { b: 10 } };")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"target"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}}," // { a: { b: 10 } };")]),a(`
`),s("span",{class:"line"})])]),s("p",null,"从上面代码中可以看到，首先通过 Object.assign 将 source 拷贝到 target 对象中，然后将 source 对象中的 b 属性由 2 修改为 10。通过控制台可以发现，打印结果中，三个 target 里的 b 属性都变为 10 了，证明 Object.assign 暂时实现了我们想要的拷贝效果。"),s("p",null,"使用 object.assign 方法有几点需要注意："),s("ul",null,[s("li",null,"它不会拷贝对象的继承属性；"),s("li",null,"它不会拷贝对象的不可枚举的属性；"),s("li",null,"可以拷贝 Symbol 类型的属性。")]),s("p",null,"可以简单理解为：Object.assign 循环遍历原对象的属性，通过复制的方式将其赋值给目标对象的相应属性，来看一下这段代码，以验证它可以拷贝 Symbol 类型的对象。"),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}}," a"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}}," b"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," },"),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}}," sym"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," Symbol"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}},"1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"Object"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"defineProperty"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"innumerable"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  value"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"不可枚举属性"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  enumerable"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}}," false")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"})")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj2"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {}")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"Object"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"assign"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj2"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"a"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"b"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 2")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"obj1"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"obj2"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj2"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"})])]),s("p",null,"我们来看一下控制台打印的结果，如下图所示。"),s("p",null,[s("img",{src:"https://static.ajiu9.cn/images/20240316211739l57kt9.png",alt:"图片"})]),s("p",null,"从上面的代码中可以看到，利用 object.assign 也可以拷贝 Symbol 类型的对象，但是如果到了对象的第二层属性 obj1.a.b 这里的时候，前者值的改变也会影响后者的第二层属性的值，说明其中依旧存在着访问共同堆内存的问题，也就是说这种方法还不能进一步复制，而只是完成了浅拷贝的功能。"),s("h4",{id:"方法二：扩展运算符方式",tabindex:"-1"},[a("方法二：扩展运算符方式 "),s("a",{class:"header-anchor",href:"#方法二：扩展运算符方式","aria-hidden":"true"},"#")]),s("p",null,"利用 JS 的扩展运算符，在构造对象的同时完成浅拷贝的功能。"),s("p",null,"扩展运算符的语法为：let cloneObj = { …obj };"),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"/* 对象的拷贝 */")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}}," a"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}}," b"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}}," c"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," }"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj2"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ..."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"a"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 2")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}}," // {a:2,b:{c:1}} console.log(obj2); //{a:1,b:{c:1}}")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"b"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"c"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 2")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}}," // {a:2,b:{c:2}} console.log(obj2); //{a:1,b:{c:2}}")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"/* 数组的拷贝 */")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," arr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ["),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}},"1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 2"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 3"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," newArr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," [..."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"arr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}}," // 跟arr.slice()是一样的效果")]),a(`
`),s("span",{class:"line"})])]),s("p",null,"扩展运算符 和 object.assign 有同样的缺陷，也就是实现的浅拷贝的功能差不多，但是如果属性都是基本类型的值，使用扩展运算符进行浅拷贝会更加方便。"),s("h4",{id:"方法三：concat-拷贝数组",tabindex:"-1"},[a("方法三：concat 拷贝数组 "),s("a",{class:"header-anchor",href:"#方法三：concat-拷贝数组","aria-hidden":"true"},"#")]),s("p",null,"数组的 concat 方法其实也是浅拷贝，所以连接一个含有引用类型的数组时，需要注意修改原数组中的元素的属性，因为它会影响拷贝之后连接的数组。不过 concat 只能用于数组的浅拷贝，使用场景比较局限。代码如下所示。"),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," arr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ["),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}},"1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 2"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 3"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," newArr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," arr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"concat"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"()")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"newArr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"["),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}},"1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 100")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"arr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}}," // [ 1, 2, 3 ]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"newArr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}}," // [ 1, 100, 3 ]")]),a(`
`),s("span",{class:"line"})])]),s("h4",{id:"方法四：slice-拷贝数组",tabindex:"-1"},[a("方法四：slice 拷贝数组 "),s("a",{class:"header-anchor",href:"#方法四：slice-拷贝数组","aria-hidden":"true"},"#")]),s("p",null,"slice 方法也比较有局限性，因为它仅仅针对数组类型。slice 方法会返回一个新的数组对象，这一对象由该方法的前两个参数来决定原数组截取的开始和结束时间，是不会影响和改变原始数组的。"),s("blockquote",null,[s("p",null,"slice 的语法为：arr.slice(begin, end);")]),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," arr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ["),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}},"1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 2"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}}," val"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 4"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," }]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," newArr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," arr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"slice"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"()")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"newArr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"["),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}},"2"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"val"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 1000")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"arr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}}," // [ 1, 2, { val: 1000 } ]")]),a(`
`),s("span",{class:"line"})])]),s("p",null,"浅拷贝——它只能拷贝一层对象。如果存在对象的嵌套，那么浅拷贝将无能为力。因此深拷贝就是为了解决这个问题而生的，它能解决多层对象嵌套问题，彻底实现拷贝。"),s("h3",{id:"手工实现一个浅拷贝",tabindex:"-1"},[a("手工实现一个浅拷贝 "),s("a",{class:"header-anchor",href:"#手工实现一个浅拷贝","aria-hidden":"true"},"#")]),s("ol",null,[s("li",null,"对基础类型做一个最基本的一个拷贝；"),s("li",null,"对引用类型开辟一个新的存储，并且拷贝一层对象属性。")]),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"function"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," shallowClone"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"target"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"  if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"typeof"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," target"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," =="),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"object"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," &&"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," target"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," !=="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," null"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"    const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," cloneTarget"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," Array"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"isArray"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"target"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," ?"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," []"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," :"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {}")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"    for"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," prop"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," in"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," target"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"      if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"target"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"hasOwnProperty"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"prop"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"))")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"        cloneTarget"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"["),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"prop"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," target"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"["),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"prop"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"    }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"    return"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," cloneTarget")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"  }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"  else"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"    return"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," target")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"  }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}")]),a(`
`),s("span",{class:"line"})])]),s("h3",{id:"深拷贝的原理和实现",tabindex:"-1"},[a("深拷贝的原理和实现 "),s("a",{class:"header-anchor",href:"#深拷贝的原理和实现","aria-hidden":"true"},"#")]),s("p",null,"浅拷贝只是创建了一个新的对象，复制了原有对象的基本类型的值，而引用数据类型只拷贝了一层属性，再深层的还是无法进行拷贝。深拷贝则不同，对于复杂引用数据类型，其在堆内存中完全开辟了一块内存地址，并将原有的对象完全复制过来存放。"),s("p",null,"这两个对象是相互独立、不受影响的，彻底实现了内存上的分离。总的来说，深拷贝的原理可以总结如下："),s("p",null,"将一个对象从内存中完整地拷贝出来一份给目标对象，并从堆内存中开辟一个全新的空间存放新对象，且新对象的修改并不会改变原对象，二者实现真正的分离。"),s("h4",{id:"方法一：json-stringfly",tabindex:"-1"},[a("方法一：JSON.stringfly "),s("a",{class:"header-anchor",href:"#方法一：json-stringfly","aria-hidden":"true"},"#")]),s("p",null,"JSON.stringfly() 是目前开发过程中最简单的深拷贝方法，其实就是把一个对象序列化成为 JSON 的字符串，并将对象里面的内容转换成字符串，最后再用 JSON.parse() 的方法将JSON 字符串生成一个新的对象。示例代码如下所示。"),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}}," a"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}}," b"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ["),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}},"1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 2"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 3"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," str"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," JSON"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"stringify"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj2"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," JSON"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"parse"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"str"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj2"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}}," // {a:1,b:[1,2,3]}")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"a"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 2")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"b"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"push"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}},"4"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}}," // {a:2,b:[1,2,3,4]}")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj2"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}}," // {a:1,b:[1,2,3]}")]),a(`
`),s("span",{class:"line"})])]),s("p",null,"从上面的代码可以看到，通过 JSON.stringfly 可以初步实现一个对象的深拷贝，通过改变 obj1 的 b 属性，其实可以看出 obj2 这个对象也不受影响。 但是使用 JSON.stringfly 实现深拷贝还是有一些地方值得注意，总结下来主要有这几点："),s("ol",null,[s("li",null,"拷贝的对象的值中如果有函数、undefined、symbol 这几种类型，经过 JSON.stringify 序列化之后的字符串中这个键值对会消失；"),s("li",null,"拷贝 Date 引用类型会变成字符串；"),s("li",null,"无法拷贝不可枚举的属性；"),s("li",null,"无法拷贝对象的原型链；"),s("li",null,"拷贝 RegExp 引用类型会变成空对象；"),s("li",null,"对象中含有 NaN、Infinity 以及 -Infinity，JSON 序列化的结果会变成 null；")]),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"function"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," Obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"()"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"  this"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"func"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ()"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," alert"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}},"1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"  this"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}}," a"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"  this"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"arr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ["),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}},"1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 2"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 3"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"  this"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"und"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," undefined")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"  this"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"reg"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," /"),s("span",{style:{"--s-dark":"#C4704F","--s-light":"#AB5E3F"}},"123"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"/")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"  this"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"date"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," new"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," Date"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}},"0"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"  this"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"NaN"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," Number"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"NaN")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"  this"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"infinity"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," Number"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#DBD7CAEE","--s-light":"#393A34"}},"POSITIVE_INFINITY")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#C99076","--s-light":"#A65E2B"}},"  this"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"sym"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," Symbol"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}},"1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," new"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," Obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"()")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"Object"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"defineProperty"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"innumerable"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  enumerable"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}}," false"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  value"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"innumerable"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"})")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"obj1"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," str"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," JSON"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"stringify"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj2"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," JSON"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"parse"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"str"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"obj2"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj2"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"})])]),s("p",null,"通过上面这段代码可以看到执行结果如下图所示"),s("p",null,[s("img",{src:"https://static.ajiu9.cn/images/20240316211813QB9z6C.png",alt:"图片"})]),s("p",null,"使用 JSON.stringify 方法实现深拷贝对象，虽然到目前为止还有很多无法实现的功能， 对于其他的也要实现深拷贝的，JSON.stringify 暂时还是无法满足的，就需要下面的几种方法。"),s("h4",{id:"方法二：基础版（手写递归实现）",tabindex:"-1"},[a("方法二：基础版（手写递归实现） "),s("a",{class:"header-anchor",href:"#方法二：基础版（手写递归实现）","aria-hidden":"true"},"#")]),s("p",null,"下面是一个实现 deepClone 函数封装的例子，通过 for in 遍历传入参数的属性值，如果值是引用类型则再次递归调用该函数，如果是基础数据类型就直接复制，代码如下所示。"),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  a"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"    b"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"  },")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"function"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," deepClone"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"  const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," cloneObj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {}")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"  for"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," key"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," in"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"    if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"typeof"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"["),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"key"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," ==="),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"object"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," &&"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," typeof"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"["),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"key"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," !=="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," null"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"      cloneObj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"["),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"key"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," deepClone"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"["),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"key"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"])")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"    else")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"      cloneObj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"["),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"key"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"["),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"key"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"  }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"  return"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," cloneObj")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj2"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," deepClone"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"a"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"b"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 2")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj2"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}}," //  {a:{b:1}}")]),a(`
`),s("span",{class:"line"})])]),s("p",null,"虽然利用递归能实现一个深拷贝，但是同上面的 JSON.stringfly 一样，还是有一些问题没有完全解决，例如："),s("ol",null,[s("li",null,"这个深拷贝函数并不能复制不可枚举的属性以及 Symbol 类型；"),s("li",null,"这种方法只是针对普通的引用类型的值做递归复制，而对于 Array、Date、RegExp、Error、Function 这样的引用类型并不能正确地拷贝；"),s("li",null,"对象的属性里面成环，即循环引用没有解决。")]),s("p",null,"下面一起看看改进的版本。"),s("h4",{id:"方法三：改进版（改进后递归实现）",tabindex:"-1"},[a("方法三：改进版（改进后递归实现） "),s("a",{class:"header-anchor",href:"#方法三：改进版（改进后递归实现）","aria-hidden":"true"},"#")]),s("p",null,"针对上面几个待解决问题，先通过四点相关的理论分析分别应该怎么做。"),s("ol",null,[s("li",null,"针对能够遍历对象的不可枚举属性以及 Symbol 类型，我们可以使用 Reflect.ownKeys 方法；"),s("li",null,"当参数为 Date、RegExp 类型，则直接生成一个新的实例返回；"),s("li",null,"利用 Object 的 getOwnPropertyDescriptors 方法可以获得对象的所有属性，以及对应的特性，顺便结合 Object 的 create 方法创建一个新对象，并继承传入原对象的原型链；"),s("li",null,"利用 WeakMap 类型作为 Hash 表，因为 WeakMap 是弱引用类型，可以有效防止内存泄漏（你可以关注一下 Map 和 weakMap 的关键区别，这里要用 weakMap），作为检测循环引用很有帮助，如果存在循环，则引用直接返回 WeakMap 存储的值。")]),s("p",null,"那么针对上面这几个问题，我们来看下改进后的递归实现的深拷贝代码应该是什么样子的，如下所示。"),s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light",style:{"--s-dark":"#dbd7caee","--s-light":"#393a34","--s-dark-bg":"#121212","--s-light-bg":"#ffffff"},tabindex:"0"},[s("code",{class:"language-js"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," isComplexDataType"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," =>"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"typeof"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," ==="),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"object"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," ||"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," typeof"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," ==="),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"function"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," &&"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," !=="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," null"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," deepClone"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," function"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," hash"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," new"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," WeakMap"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"())"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"  if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"constructor"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," ==="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," Date"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"    return"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," new"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," Date"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}}," // 日期对象直接返回一个新的日期对象")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"  if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"constructor"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," ==="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," RegExp"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"    return"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," new"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," RegExp"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}}," // 正则对象直接返回一个新的正则对象")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"  // 如果循环引用了就用 weakMap 来解决")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"  if"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"hash"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"has"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"))")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"    return"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," hash"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"get"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"  const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," allDesc"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," Object"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"getOwnPropertyDescriptors"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"  // 遍历传入参数所有键的特性")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"  const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," cloneObj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," Object"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"create"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"Object"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"getPrototypeOf"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"),"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," allDesc"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"  // 继承原型链")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"  hash"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"set"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," cloneObj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"  for"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," key"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," of"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," Reflect"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"ownKeys"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"))")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"    cloneObj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"["),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"key"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ("),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"isComplexDataType"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"["),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"key"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"])"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," &&"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," typeof"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"["),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"key"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," !=="),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"function"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," ?"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," deepClone"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"["),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"key"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"],"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," hash"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," :"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"["),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"key"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"]")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}},"  return"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," cloneObj")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}},"// 下面是验证代码")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"let"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  num"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 0"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  str"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," ''"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  boolean"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}}," true"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  unf"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," undefined"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  nul"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," null"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}}," name"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"我是一个对象"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}}," id"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," },")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  arr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ["),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}},"0"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 2"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"],")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"  func"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"()"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"我是一个函数"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," },")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  date"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," new"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," Date"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}},"0"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"),")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  reg"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}}," new"),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," RegExp"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"/我是一个正则/ig"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"),")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"  ["),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"Symbol"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"1"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")]:"),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}}," 1"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"}")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"Object"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"defineProperty"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"innumerable"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  enumerable"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#4D9375","--s-light":"#1E754F"}}," false"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B8A965","--s-light":"#998418"}},"  value"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},":"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}}," '"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"不可枚举属性"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"})")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," Object"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"create"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," Object"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"getOwnPropertyDescriptors"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"))")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"loop"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj"),s("span",{style:{"--s-dark":"#758575DD","--s-light":"#A0ADA0"}}," // 设置loop成循环引用的属性")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#CB7676","--s-light":"#AB5959"}},"const"),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," cloneObj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}}," ="),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}}," deepClone"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"cloneObj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"arr"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"push"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#4C9A91","--s-light":"#2F798A"}},"4"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"obj"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," obj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}},"console"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"."),s("span",{style:{"--s-dark":"#80A665","--s-light":"#59873A"}},"log"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},"("),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#C98A7D","--s-light":"#B56959"}},"cloneObj"),s("span",{style:{"--s-dark":"#C98A7D99","--s-light":"#B5695999"}},"'"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},","),s("span",{style:{"--s-dark":"#BD976A","--s-light":"#B07D48"}}," cloneObj"),s("span",{style:{"--s-dark":"#666666","--s-light":"#999999"}},")")]),a(`
`),s("span",{class:"line"})])]),s("p",null,[s("img",{src:"https://static.ajiu9.cn/images/202403162118438RZn3P.png",alt:"图片"})]),s("p",null,"从这张截图的结果可以看出，改进版的 deepClone 函数已经对基础版的那几个问题进行了改进，也验证了上面提到的那四点理论。"),s("h3",{id:"总结",tabindex:"-1"},[a("总结 "),s("a",{class:"header-anchor",href:"#总结","aria-hidden":"true"},"#")]),s("p",null,"其实到最后我们可以看到，自己完整实现一个深拷贝，还是考察了不少的知识点和编程能力，总结下来大致分为这几点。"),s("ul",null,[s("li",null,"基础编码能力（递归，代码严谨性，抽象能力）。"),s("li",null,"js编码能力（Weak Map能力，引用类型的各种API熟练程度，准确判断JS各种数量类型能力。"),s("li",null,"考虑问题的全面性（边界情况，解决循环引用的能力）。")])],-1),B={__name:"how-to-achieve-a-deep-copy",setup(d){const l={title:"如何实现一个深浅拷贝",lang:"zh",type:"note",date:"2021-01-21T00:00:00.000Z",image:"https://ajiu9.cn/og/how-to-achieve-a-deep-copy.png",meta:[{property:"og:title",content:"如何实现一个深浅拷贝"},{name:"twitter:title",content:"如何实现一个深浅拷贝"},{property:"og:image",content:"https://ajiu9.cn/og/how-to-achieve-a-deep-copy.png"},{name:"twitter:image",content:"https://ajiu9.cn/og/how-to-achieve-a-deep-copy.png"},{name:"twitter:card",content:"summary_large_image"}]};return n({title:"如何实现一个深浅拷贝",meta:[{property:"og:title",content:"如何实现一个深浅拷贝"},{name:"twitter:title",content:"如何实现一个深浅拷贝"},{property:"og:image",content:"https://ajiu9.cn/og/how-to-achieve-a-deep-copy.png"},{name:"twitter:image",content:"https://ajiu9.cn/og/how-to-achieve-a-deep-copy.png"},{name:"twitter:card",content:"summary_large_image"}]}),(y,k)=>{const t=p;return r(),e(t,{frontmatter:l},{default:i(()=>[g]),_:1})}}};export{B as default};
