<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="author" content="Ajiu9"><meta http-equiv="X-UA-Compatible" content="chrome=1"><meta name="revisit-after" content="7 days"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon.svg" type="image/svg+xml"><link rel="alternate" type="application/rss+xml" title="Ajiu9's Blog" href="/feed.xml"><meta name="msapplication-TileColor" content="#ffffff"><title>vue数字指令</title><script>!function(){var e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("vueuse-color-scheme")||"auto";("dark"===t||e&&"light"!==t)&&document.documentElement.classList.toggle("dark",!0)}()</script><script type="module" crossorigin="" src="/assets/app-BYoe32SR.js"></script><link rel="stylesheet" crossorigin="" href="/assets/app-CGswqm6a.css"><link rel="modulepreload" crossorigin="" href="/assets/directive-number-CSCPDCUf.js"><meta property="og:title" content="vue数字指令"><meta name="twitter:title" content="vue数字指令"><meta property="og:image" content="https://ajiu9.cn/og/directive-number.png"><meta name="twitter:image" content="https://ajiu9.cn/og/directive-number.png"><meta name="twitter:card" content="summary_large_image"></head><body class="font-sans text-gray-700 dark:text-gray-200 relative"><div id="app" data-server-rendered="true"><!--[--><header class="header z-40" data-v-89b7cfe3=""><a href="/" class="w-12 h-12 absolute xl:fixed m-5 select-none outline-none" focusable="false" data-v-89b7cfe3=""><svg class="svg" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-89b7cfe3="" data-v-6edbdcb7=""><title data-v-6edbdcb7="">Ajiu9</title><mask id="mask0_634_3" style="mask-type:alpha" width="47" height="80" data-v-6edbdcb7=""><path d="M23.5125 22.9252C33.7594 11.9188 21.3168 -4.95774 7.41017 3.11364C-6.49649 11.185 3.75055 40.5355 23.5125 22.9252ZM23.5125 22.9252C79.8707 -24.0356 12.5336 46.4057 12.5336 69.1523C12.5336 91.8989 36.8153 72.5834 16.9251 38.3343" fill="white" data-v-6edbdcb7=""></path></mask><g mask="url(#mask0_634_3)" data-v-6edbdcb7=""><path class="path1" d="M23.5125 22.9252C33.7594 11.9188 21.3168 -4.95774 7.41017 3.11364C-6.49649 11.185 3.75055 40.5355 23.5125 22.9252ZM23.5125 22.9252C79.8707 -24.0356 12.5336 46.4057 12.5336 69.1523C12.5336 91.8989 36.8153 72.5834 16.9251 38.3343" stroke="black" stroke-width="3.5" stroke-linecap="round" data-v-6edbdcb7=""></path></g></svg></a><button title="Scroll to top" fixed="" right-3="" bottom-3="" w-10="" h-10="" hover:op100="" rounded-full="" hover-bg-hex-8883="" transition="" duration-300="" z-100="" print:hidden="" class="op0! pointer-events-none" data-v-89b7cfe3=""><div i-ri-arrow-up-line="" data-v-89b7cfe3=""></div></button><nav class="nav" data-v-89b7cfe3=""><div class="spacer" data-v-89b7cfe3=""></div><div class="right" print:op0="" data-v-89b7cfe3=""><a href="/posts" class="router-link-active" title="Blog" data-v-89b7cfe3=""><span class="lt-md:hidden" data-v-89b7cfe3="">博客</span><div i-ri-article-line="" md:hidden="" data-v-89b7cfe3=""></div></a><a href="/projects" class="" title="Projects" data-v-89b7cfe3=""><span class="lt-md:hidden" data-v-89b7cfe3="">项目</span><div i-ri-lightbulb-line="" class="md:hidden" data-v-89b7cfe3=""></div></a><a href="/photos" class="" title="photos" data-v-89b7cfe3=""><span class="lt-md:hidden" data-v-89b7cfe3="">摄影</span><div i-arcticons:photoncamera="" class="md:hidden" data-v-89b7cfe3=""></div></a><a href="https://github.com/ajiu9" target="_blank" title="GitHub" class="lt-md:hidden" data-v-89b7cfe3=""><div i-uil-github-alt="" data-v-89b7cfe3=""></div></a><a href="/feed.xml" target="_blank" title="RSS" class="lt-md:hidden" data-v-89b7cfe3=""><div i-la-rss-square="" style="font-size:1.25rem;margin:0 -.125rem" data-v-89b7cfe3=""></div></a><a class="select-none" title="Toggle Color Scheme" data-v-89b7cfe3=""><div i-ri-sun-line="" dark:i-ri-moon-line=""></div></a></div></nav></header><main class="px-7 py-10 of-x-hidden"><!--[--><!----><div class="prose m-auto mb-8"><h1 class="mb-0 slide-enter-50">vue数字指令</h1><p class="opacity-50 !-mt-6 slide-enter-50">Mar 16<!----></p><!----><!----><!----></div><article class=""><!--[--><div class="prose m-auto slide-enter-content"><h4 id="指令功能" tabindex="-1">指令功能 <a class="header-anchor" href="#指令功能" aria-hidden="true">#</a></h4><ol><li>能够实现常用数字和金额校验</li><li>能够自定义小数位,整数位，是否包含0，负数</li><li>对数据边界进行处理</li><li>能够处理复制过来的数据（转出收费项目1245租赁保证金余额0.09转入收费项目 =&gt; 12450.09）</li></ol><h4 id="优势：可以去除代码中校验的正则表达，优化代码，最重要的是提升用户体验，输入的就是正确" tabindex="-1">优势：可以去除代码中校验的正则表达，优化代码，最重要的是提升用户体验，输入的就是正确 <a class="header-anchor" href="#优势：可以去除代码中校验的正则表达，优化代码，最重要的是提升用户体验，输入的就是正确" aria-hidden="true">#</a></h4><h4 id="指令实现" tabindex="-1">指令实现 <a class="header-anchor" href="#指令实现" aria-hidden="true">#</a></h4><pre class="shiki shiki-themes github-light github-dark" style="--s-light:#24292e;--s-dark:#e1e4e8;--s-light-bg:#fff;--s-dark-bg:#24292e" tabindex="0"><code class="language-js"><span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">const</span><span style="--s-light:#005CC5;--s-dark:#79B8FF"> MAX_INT_PRECISION</span><span style="--s-light:#D73A49;--s-dark:#F97583"> =</span><span style="--s-light:#005CC5;--s-dark:#79B8FF"> 13</span><span style="--s-light:#6A737D;--s-dark:#6A737D"> // 最大整数位精度</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">const</span><span style="--s-light:#005CC5;--s-dark:#79B8FF"> MAX_PRECISION</span><span style="--s-light:#D73A49;--s-dark:#F97583"> =</span><span style="--s-light:#005CC5;--s-dark:#79B8FF"> 15</span><span style="--s-light:#6A737D;--s-dark:#6A737D"> // 最大小数位精度</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">const</span><span style="--s-light:#005CC5;--s-dark:#79B8FF"> IS_IE</span><span style="--s-light:#D73A49;--s-dark:#F97583"> =</span><span style="--s-light:#D73A49;--s-dark:#F97583"> !!</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">window.ActiveXObject </span><span style="--s-light:#D73A49;--s-dark:#F97583">||</span><span style="--s-light:#032F62;--s-dark:#9ECBFF"> 'ActiveXObject'</span><span style="--s-light:#D73A49;--s-dark:#F97583"> in</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> window</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">let</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> inputEvent</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">if</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> (</span><span style="--s-light:#005CC5;--s-dark:#79B8FF">IS_IE</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--s-light:#6A737D;--s-dark:#6A737D">  // ie 支持方式</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">  inputEvent </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> document.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">createEvent</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">'Event'</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">  inputEvent.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">initEvent</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">'input'</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">, </span><span style="--s-light:#005CC5;--s-dark:#79B8FF">true</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">, </span><span style="--s-light:#005CC5;--s-dark:#79B8FF">false</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">else</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">  inputEvent </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#D73A49;--s-dark:#F97583"> new</span><span style="--s-light:#6F42C1;--s-dark:#B392F0"> Event</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">'input'</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">export</span><span style="--s-light:#D73A49;--s-dark:#F97583"> default</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--s-light:#6F42C1;--s-dark:#B392F0">  bind</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(</span><span style="--s-light:#E36209;--s-dark:#FFAB70">el</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">, </span><span style="--s-light:#E36209;--s-dark:#FFAB70">binding</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">, </span><span style="--s-light:#E36209;--s-dark:#FFAB70">vNode</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">    let</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> { minus </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#005CC5;--s-dark:#79B8FF"> false</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">, zero </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#005CC5;--s-dark:#79B8FF"> false</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> } </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> binding.modifiers </span><span style="--s-light:#6A737D;--s-dark:#6A737D">// 修饰符的对象 是否为负数，是否包含零</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">    let</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> elInput </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> el</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">    const</span><span style="--s-light:#005CC5;--s-dark:#79B8FF"> isComponentInstance</span><span style="--s-light:#D73A49;--s-dark:#F97583"> =</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> vNode.componentInstance </span><span style="--s-light:#6A737D;--s-dark:#6A737D">// true 组件， false 原生input</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">    let</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> effect </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#005CC5;--s-dark:#79B8FF"> true</span><span style="--s-light:#6A737D;--s-dark:#6A737D"> // 原生input是否执行input事件</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">    let</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> intPrecision </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#005CC5;--s-dark:#79B8FF"> MAX_INT_PRECISION</span><span style="--s-light:#6A737D;--s-dark:#6A737D"> // 整数位精度</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">    let</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> precision </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#005CC5;--s-dark:#79B8FF"> MAX_PRECISION</span><span style="--s-light:#6A737D;--s-dark:#6A737D"> // 小数位精度</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">    let</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> max </span><span style="--s-light:#6A737D;--s-dark:#6A737D">// 最大值</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">    let</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> min </span><span style="--s-light:#6A737D;--s-dark:#6A737D">// 最小值</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">    const</span><span style="--s-light:#005CC5;--s-dark:#79B8FF"> bindingValue</span><span style="--s-light:#D73A49;--s-dark:#F97583"> =</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> binding.value</span></span>
<span class="line"></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">    if</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> (el.tagName.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">toLocaleUpperCase</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">() </span><span style="--s-light:#D73A49;--s-dark:#F97583">!==</span><span style="--s-light:#032F62;--s-dark:#9ECBFF"> 'INPUT'</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">      elInput </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> el.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">getElementsByTagName</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">'input'</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">)[</span><span style="--s-light:#005CC5;--s-dark:#79B8FF">0</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="--s-light:#6A737D;--s-dark:#6A737D">    // 指令的绑定值</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">    if</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> (</span><span style="--s-light:#D73A49;--s-dark:#F97583">typeof</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> bindingValue </span><span style="--s-light:#D73A49;--s-dark:#F97583">===</span><span style="--s-light:#032F62;--s-dark:#9ECBFF"> 'object'</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">      const</span><span style="--s-light:#005CC5;--s-dark:#79B8FF"> valueMinus</span><span style="--s-light:#D73A49;--s-dark:#F97583"> =</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> bindingValue.minus </span><span style="--s-light:#D73A49;--s-dark:#F97583">||</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> minus</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">      const</span><span style="--s-light:#005CC5;--s-dark:#79B8FF"> valueIntPrecision</span><span style="--s-light:#D73A49;--s-dark:#F97583"> =</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> Math.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">floor</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(bindingValue.intPrecision)</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">      const</span><span style="--s-light:#005CC5;--s-dark:#79B8FF"> valuePrecision</span><span style="--s-light:#D73A49;--s-dark:#F97583"> =</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> Math.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">floor</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(bindingValue.precision)</span></span>
<span class="line"></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">      minus </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#D73A49;--s-dark:#F97583"> !!</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">valueMinus</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">      intPrecision </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> Math.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">min</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(Number.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">isNaN</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(valueIntPrecision) </span><span style="--s-light:#D73A49;--s-dark:#F97583">?</span><span style="--s-light:#005CC5;--s-dark:#79B8FF"> MAX_INT_PRECISION</span><span style="--s-light:#D73A49;--s-dark:#F97583"> :</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> valueIntPrecision, </span><span style="--s-light:#005CC5;--s-dark:#79B8FF">MAX_INT_PRECISION</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">      precision </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> Math.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">min</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(Number.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">isNaN</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(valuePrecision) </span><span style="--s-light:#D73A49;--s-dark:#F97583">?</span><span style="--s-light:#005CC5;--s-dark:#79B8FF"> MAX_PRECISION</span><span style="--s-light:#D73A49;--s-dark:#F97583"> :</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> valuePrecision, </span><span style="--s-light:#005CC5;--s-dark:#79B8FF">MAX_PRECISION</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">      max </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> bindingValue.max</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">      min </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> bindingValue.min</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">    const</span><span style="--s-light:#6F42C1;--s-dark:#B392F0"> setVal</span><span style="--s-light:#D73A49;--s-dark:#F97583"> =</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> (</span><span style="--s-light:#E36209;--s-dark:#FFAB70">val</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">) </span><span style="--s-light:#D73A49;--s-dark:#F97583">=&gt;</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">      effect </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#005CC5;--s-dark:#79B8FF"> false</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">      elInput.value </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> val</span></span>
<span class="line"><span style="--s-light:#6A737D;--s-dark:#6A737D">      // 如果是自定义组件就触发自定义组件的input事件</span></span>
<span class="line"><span style="--s-light:#6A737D;--s-dark:#6A737D">      // 如果是原生组件就触发原生组件的input事件</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">      isComponentInstance </span><span style="--s-light:#D73A49;--s-dark:#F97583">?</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> vNode.componentInstance.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">$emit</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">'input'</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">, val) </span><span style="--s-light:#D73A49;--s-dark:#F97583">:</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> elInput.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">dispatchEvent</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(inputEvent)</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">    const</span><span style="--s-light:#6F42C1;--s-dark:#B392F0"> listener</span><span style="--s-light:#D73A49;--s-dark:#F97583"> =</span><span style="--s-light:#D73A49;--s-dark:#F97583"> function</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> (</span><span style="--s-light:#E36209;--s-dark:#FFAB70">e</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">      if</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> (</span><span style="--s-light:#D73A49;--s-dark:#F97583">!</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">isComponentInstance </span><span style="--s-light:#D73A49;--s-dark:#F97583">&amp;&amp;</span><span style="--s-light:#D73A49;--s-dark:#F97583"> !</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">effect) {</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">        effect </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#005CC5;--s-dark:#79B8FF"> true</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">        return</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">      let</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> elVal </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> e.target.value</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">      let</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> hasMinus </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#005CC5;--s-dark:#79B8FF"> false</span></span>
<span class="line"></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">      if</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> (minus) {</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">        elVal </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> elVal.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">replace</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">/</span><span style="--s-light:#005CC5;--s-dark:#79B8FF">[</span><span style="--s-light:#D73A49;--s-dark:#F97583">^</span><span style="--s-light:#005CC5;--s-dark:#79B8FF">0-9</span><span style="--s-light:#22863A;--s-dark:#85E89D;--s-light-font-weight:bold;--s-dark-font-weight:bold">\.\-</span><span style="--s-light:#005CC5;--s-dark:#79B8FF">]</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">/</span><span style="--s-light:#D73A49;--s-dark:#F97583">g</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">, </span><span style="--s-light:#032F62;--s-dark:#9ECBFF">''</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">        if</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> (elVal </span><span style="--s-light:#D73A49;--s-dark:#F97583">&amp;&amp;</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> elVal.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">substring</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(</span><span style="--s-light:#005CC5;--s-dark:#79B8FF">0</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">, </span><span style="--s-light:#005CC5;--s-dark:#79B8FF">1</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">) </span><span style="--s-light:#D73A49;--s-dark:#F97583">===</span><span style="--s-light:#032F62;--s-dark:#9ECBFF"> '-'</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">          hasMinus </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#005CC5;--s-dark:#79B8FF"> true</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">      elVal </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> elVal.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">replace</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">/</span><span style="--s-light:#005CC5;--s-dark:#79B8FF">[</span><span style="--s-light:#D73A49;--s-dark:#F97583">^</span><span style="--s-light:#005CC5;--s-dark:#79B8FF">0-9</span><span style="--s-light:#22863A;--s-dark:#85E89D;--s-light-font-weight:bold;--s-dark-font-weight:bold">\.</span><span style="--s-light:#005CC5;--s-dark:#79B8FF">]</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">/</span><span style="--s-light:#D73A49;--s-dark:#F97583">g</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">, </span><span style="--s-light:#032F62;--s-dark:#9ECBFF">''</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">      const</span><span style="--s-light:#005CC5;--s-dark:#79B8FF"> reg</span><span style="--s-light:#D73A49;--s-dark:#F97583"> =</span><span style="--s-light:#D73A49;--s-dark:#F97583"> new</span><span style="--s-light:#6F42C1;--s-dark:#B392F0"> RegExp</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">`^0+(</span><span style="--s-light:#005CC5;--s-dark:#79B8FF">\\</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">d+)|[^0-9</span><span style="--s-light:#005CC5;--s-dark:#79B8FF">\\</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">.]+|^</span><span style="--s-light:#005CC5;--s-dark:#79B8FF">\\</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">.|(^</span><span style="--s-light:#005CC5;--s-dark:#79B8FF">\\</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">d+)(</span><span style="--s-light:#005CC5;--s-dark:#79B8FF">\\</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">.{2,})|(^</span><span style="--s-light:#005CC5;--s-dark:#79B8FF">\\</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">d+</span><span style="--s-light:#005CC5;--s-dark:#79B8FF">\\</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">.{1}</span><span style="--s-light:#005CC5;--s-dark:#79B8FF">\\</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">d{0,${</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">precision</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">}})[0-9</span><span style="--s-light:#005CC5;--s-dark:#79B8FF">\\</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">.]</span><span style="--s-light:#005CC5;--s-dark:#79B8FF">\*</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">|(^[0-9]{${</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">intPrecision</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">}})[0-9]+`</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">, </span><span style="--s-light:#032F62;--s-dark:#9ECBFF">'g'</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">      elVal </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> elVal.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">replace</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(reg, (</span><span style="--s-light:#E36209;--s-dark:#FFAB70">match</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">, </span><span style="--s-light:#E36209;--s-dark:#FFAB70">p1</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">, </span><span style="--s-light:#E36209;--s-dark:#FFAB70">p2</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">, </span><span style="--s-light:#E36209;--s-dark:#FFAB70">p3</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">, </span><span style="--s-light:#E36209;--s-dark:#FFAB70">p4</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">, </span><span style="--s-light:#E36209;--s-dark:#FFAB70">p5</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">) </span><span style="--s-light:#D73A49;--s-dark:#F97583">=&gt;</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">        return</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> p1 </span><span style="--s-light:#D73A49;--s-dark:#F97583">||</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> p4 </span><span style="--s-light:#D73A49;--s-dark:#F97583">||</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> p5 </span><span style="--s-light:#D73A49;--s-dark:#F97583">||</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> (p3 </span><span style="--s-light:#D73A49;--s-dark:#F97583">?</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> p2 </span><span style="--s-light:#D73A49;--s-dark:#F97583">:</span><span style="--s-light:#032F62;--s-dark:#9ECBFF"> ''</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">      })</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">      if</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> (minus </span><span style="--s-light:#D73A49;--s-dark:#F97583">&amp;&amp;</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> hasMinus)</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">        elVal </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#032F62;--s-dark:#9ECBFF"> `-${</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">elVal</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">}`</span></span>
<span class="line"><span style="--s-light:#6F42C1;--s-dark:#B392F0">      setVal</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(elVal)</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">    elInput.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">addEventListener</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">'input'</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">, listener, </span><span style="--s-light:#005CC5;--s-dark:#79B8FF">true</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--s-light:#6A737D;--s-dark:#6A737D">    // 用来清除监听</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">    el.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">unbindEventListener</span><span style="--s-light:#D73A49;--s-dark:#F97583"> =</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> () </span><span style="--s-light:#D73A49;--s-dark:#F97583">=&gt;</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">      elInput.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">removeEventListener</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">'input'</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">, listener, </span><span style="--s-light:#005CC5;--s-dark:#79B8FF">true</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">    elInput.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">onblur</span><span style="--s-light:#D73A49;--s-dark:#F97583"> =</span><span style="--s-light:#D73A49;--s-dark:#F97583"> function</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> (</span><span style="--s-light:#E36209;--s-dark:#FFAB70">e</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">      let</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> value </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> e.target.value</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">      if</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> (zero </span><span style="--s-light:#D73A49;--s-dark:#F97583">&amp;&amp;</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> value </span><span style="--s-light:#D73A49;--s-dark:#F97583">===</span><span style="--s-light:#032F62;--s-dark:#9ECBFF"> '0'</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">        return</span></span>
<span class="line"></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">      value </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> value.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">replace</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">/</span><span style="--s-light:#032F62;--s-dark:#DBEDFF">(</span><span style="--s-light:#D73A49;--s-dark:#F97583">^</span><span style="--s-light:#005CC5;--s-dark:#79B8FF">[0-9]</span><span style="--s-light:#D73A49;--s-dark:#F97583">+|^</span><span style="--s-light:#032F62;--s-dark:#DBEDFF">-</span><span style="--s-light:#005CC5;--s-dark:#79B8FF">[0-9]</span><span style="--s-light:#D73A49;--s-dark:#F97583">+</span><span style="--s-light:#032F62;--s-dark:#DBEDFF">)</span><span style="--s-light:#22863A;--s-dark:#85E89D;--s-light-font-weight:bold;--s-dark-font-weight:bold">\.</span><span style="--s-light:#D73A49;--s-dark:#F97583">$</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">/</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">, </span><span style="--s-light:#032F62;--s-dark:#9ECBFF">'$1'</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">      value </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> value.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">replace</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">/</span><span style="--s-light:#D73A49;--s-dark:#F97583">^</span><span style="--s-light:#032F62;--s-dark:#DBEDFF">-</span><span style="--s-light:#D73A49;--s-dark:#F97583">$|^</span><span style="--s-light:#032F62;--s-dark:#DBEDFF">0</span><span style="--s-light:#D73A49;--s-dark:#F97583">+$|^</span><span style="--s-light:#032F62;--s-dark:#DBEDFF">-0</span><span style="--s-light:#D73A49;--s-dark:#F97583">+$|^</span><span style="--s-light:#032F62;--s-dark:#DBEDFF">0</span><span style="--s-light:#22863A;--s-dark:#85E89D;--s-light-font-weight:bold;--s-dark-font-weight:bold">\.</span><span style="--s-light:#032F62;--s-dark:#DBEDFF">0</span><span style="--s-light:#D73A49;--s-dark:#F97583">*$|^</span><span style="--s-light:#032F62;--s-dark:#DBEDFF">-0</span><span style="--s-light:#22863A;--s-dark:#85E89D;--s-light-font-weight:bold;--s-dark-font-weight:bold">\.</span><span style="--s-light:#032F62;--s-dark:#DBEDFF">0</span><span style="--s-light:#D73A49;--s-dark:#F97583">*$</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">/</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">, </span><span style="--s-light:#032F62;--s-dark:#9ECBFF">''</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">      if</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> (value </span><span style="--s-light:#D73A49;--s-dark:#F97583">!==</span><span style="--s-light:#032F62;--s-dark:#9ECBFF"> ''</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">        if</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> (min)</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">          value </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> Math.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">max</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(value, min)</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">        if</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> (max)</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">          value </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> Math.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">min</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(value, max)</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">      if</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> (e.target.value </span><span style="--s-light:#D73A49;--s-dark:#F97583">!==</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> value)</span></span>
<span class="line"><span style="--s-light:#6F42C1;--s-dark:#B392F0">        setVal</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(value)</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--s-light:#6F42C1;--s-dark:#B392F0">  unbind</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(</span><span style="--s-light:#E36209;--s-dark:#FFAB70">el</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">    el.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">unbindEventListener</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">}</span></span></code></pre><h4 id="index-js注册指令" tabindex="-1">index.js注册指令 <a class="header-anchor" href="#index-js注册指令" aria-hidden="true">#</a></h4><pre class="shiki shiki-themes github-light github-dark" style="--s-light:#24292e;--s-dark:#e1e4e8;--s-light-bg:#fff;--s-dark-bg:#24292e" tabindex="0"><code class="language-js"><span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">import</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> number </span><span style="--s-light:#D73A49;--s-dark:#F97583">from</span><span style="--s-light:#032F62;--s-dark:#9ECBFF"> './number'</span></span>
<span class="line"></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">const</span><span style="--s-light:#6F42C1;--s-dark:#B392F0"> install</span><span style="--s-light:#D73A49;--s-dark:#F97583"> =</span><span style="--s-light:#D73A49;--s-dark:#F97583"> function</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> (</span><span style="--s-light:#E36209;--s-dark:#FFAB70">Vue</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">  Vue.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">directive</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">'number'</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">, number)</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">if</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> (window.Vue) {</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">  window.number </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> number</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">  Vue.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">use</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">(install)</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">number.install </span><span style="--s-light:#D73A49;--s-dark:#F97583">=</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> install</span></span>
<span class="line"><span style="--s-light:#D73A49;--s-dark:#F97583">export</span><span style="--s-light:#D73A49;--s-dark:#F97583"> default</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> number</span></span></code></pre><h4 id="在vue文件中引用指令" tabindex="-1">在vue文件中引用指令 <a class="header-anchor" href="#在vue文件中引用指令" aria-hidden="true">#</a></h4><pre class="shiki shiki-themes github-light github-dark" style="--s-light:#24292e;--s-dark:#e1e4e8;--s-light-bg:#fff;--s-dark-bg:#24292e" tabindex="0"><code class="language-vue"><span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">// 组件中引入</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">directives: { number }</span></span>
<span class="line"></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">// v-number</span></span>
<span class="line"></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">// 整数最多13位，小数15位数</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">&lt;</span><span style="--s-light:#22863A;--s-dark:#85E89D">el-input</span><span style="--s-light:#6F42C1;--s-dark:#B392F0"> v-number</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">&gt;&lt;/</span><span style="--s-light:#22863A;--s-dark:#85E89D">el-input</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">// 整数数最多3位, 小数2位数</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">&lt;</span><span style="--s-light:#22863A;--s-dark:#85E89D">el-input</span><span style="--s-light:#6F42C1;--s-dark:#B392F0"> v-number</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">=</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">"</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">{ intPrecision: </span><span style="--s-light:#005CC5;--s-dark:#79B8FF">3</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">, precision: </span><span style="--s-light:#005CC5;--s-dark:#79B8FF">2</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> }</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">"</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">&gt;&lt;/</span><span style="--s-light:#22863A;--s-dark:#85E89D">el-input</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">// 最大值100 最小值0</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">&lt;</span><span style="--s-light:#22863A;--s-dark:#85E89D">el-input</span><span style="--s-light:#6F42C1;--s-dark:#B392F0"> v-number</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">=</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">"</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">{ max: </span><span style="--s-light:#005CC5;--s-dark:#79B8FF">100</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">, min: </span><span style="--s-light:#005CC5;--s-dark:#79B8FF">0</span><span style="--s-light:#24292E;--s-dark:#E1E4E8"> }</span><span style="--s-light:#032F62;--s-dark:#9ECBFF">"</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">&gt;&lt;/</span><span style="--s-light:#22863A;--s-dark:#85E89D">el-input</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">// 可输入0</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">&lt;</span><span style="--s-light:#22863A;--s-dark:#85E89D">el-input</span><span style="--s-light:#6F42C1;--s-dark:#B392F0"> v-number</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">zero</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">&gt;&lt;/</span><span style="--s-light:#22863A;--s-dark:#85E89D">el-input</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">// 可输入负-</span></span>
<span class="line"><span style="--s-light:#24292E;--s-dark:#E1E4E8">&lt;</span><span style="--s-light:#22863A;--s-dark:#85E89D">el-input</span><span style="--s-light:#6F42C1;--s-dark:#B392F0"> v-number</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">.</span><span style="--s-light:#6F42C1;--s-dark:#B392F0">minus</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">&gt;&lt;/</span><span style="--s-light:#22863A;--s-dark:#85E89D">el-input</span><span style="--s-light:#24292E;--s-dark:#E1E4E8">&gt;</span></span></code></pre></div><!--]--></article><div class="prose m-auto mt-8 mb-8 slide-enter animate-delay-500 print:hidden"><!----><br><span font-mono="" op50="">&gt; </span><a href="/posts" class="router-link-active font-mono op50 hover:op75"></a></div><!--]--><div class="mt-10 mb-6 prose m-auto flex slide-enter animate-delay-1200!"><span class="text-sm op50">@2024-2025 湘ICP备2024048835号</span><div class="flex-auto"></div></div></main><!----><!--]--></div></body></html>