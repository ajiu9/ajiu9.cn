<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="author" content="Ajiu9"><meta http-equiv="X-UA-Compatible" content="chrome=1"><meta name="revisit-after" content="7 days"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon.svg" type="image/svg+xml"><link rel="alternate" type="application/rss+xml" title="Ajiu9's Blog" href="/feed.xml"><meta name="msapplication-TileColor" content="#ffffff"><title>HTTP协议类</title><script>!function(){var e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("vueuse-color-scheme")||"auto";("dark"===t||e&&"light"!==t)&&document.documentElement.classList.toggle("dark",!0)}()</script><script type="module" crossorigin="" src="/assets/app-Bi-v8j2l.js"></script><link rel="stylesheet" crossorigin="" href="/assets/app-CduSXrVW.css"><link rel="modulepreload" crossorigin="" href="/assets/http-protocol-class-CCiCTQVK.js"><meta property="og:title" content="HTTP协议类"><meta name="twitter:title" content="HTTP协议类"><meta property="og:image" content="https://ajiu9.cn/og/http-protocol-class.png"><meta name="twitter:image" content="https://ajiu9.cn/og/http-protocol-class.png"><meta name="twitter:card" content="summary_large_image"></head><body class="font-sans text-gray-700 dark:text-gray-200 relative"><div id="app" data-server-rendered="true"><!--[--><header class="header z-40" data-v-89b7cfe3=""><a href="/" class="w-12 h-12 absolute xl:fixed m-5 select-none outline-none" focusable="false" data-v-89b7cfe3=""><svg class="svg" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-89b7cfe3="" data-v-6edbdcb7=""><title data-v-6edbdcb7="">Ajiu9</title><mask id="mask0_634_3" style="mask-type:alpha" width="47" height="80" data-v-6edbdcb7=""><path d="M23.5125 22.9252C33.7594 11.9188 21.3168 -4.95774 7.41017 3.11364C-6.49649 11.185 3.75055 40.5355 23.5125 22.9252ZM23.5125 22.9252C79.8707 -24.0356 12.5336 46.4057 12.5336 69.1523C12.5336 91.8989 36.8153 72.5834 16.9251 38.3343" fill="white" data-v-6edbdcb7=""></path></mask><g mask="url(#mask0_634_3)" data-v-6edbdcb7=""><path class="path1" d="M23.5125 22.9252C33.7594 11.9188 21.3168 -4.95774 7.41017 3.11364C-6.49649 11.185 3.75055 40.5355 23.5125 22.9252ZM23.5125 22.9252C79.8707 -24.0356 12.5336 46.4057 12.5336 69.1523C12.5336 91.8989 36.8153 72.5834 16.9251 38.3343" stroke="black" stroke-width="3.5" stroke-linecap="round" data-v-6edbdcb7=""></path></g></svg></a><button title="Scroll to top" fixed="" right-3="" bottom-3="" w-10="" h-10="" hover:op100="" rounded-full="" hover-bg-hex-8883="" transition="" duration-300="" z-100="" print:hidden="" class="op0! pointer-events-none" data-v-89b7cfe3=""><div i-ri-arrow-up-line="" data-v-89b7cfe3=""></div></button><nav class="nav" data-v-89b7cfe3=""><div class="spacer" data-v-89b7cfe3=""></div><div class="right" print:op0="" data-v-89b7cfe3=""><a href="/posts" class="router-link-active" title="Blog" data-v-89b7cfe3=""><span class="lt-md:hidden" data-v-89b7cfe3="">博客</span><div i-ri-article-line="" md:hidden="" data-v-89b7cfe3=""></div></a><a href="/projects" class="" title="Projects" data-v-89b7cfe3=""><span class="lt-md:hidden" data-v-89b7cfe3="">项目</span><div i-ri-lightbulb-line="" class="md:hidden" data-v-89b7cfe3=""></div></a><a href="/photos" class="" title="photos" data-v-89b7cfe3=""><span class="lt-md:hidden" data-v-89b7cfe3="">摄影</span><div i-arcticons:photoncamera="" class="md:hidden" data-v-89b7cfe3=""></div></a><a href="https://github.com/ajiu9" target="_blank" title="GitHub" class="lt-md:hidden" data-v-89b7cfe3=""><div i-uil-github-alt="" data-v-89b7cfe3=""></div></a><a href="/feed.xml" target="_blank" title="RSS" class="lt-md:hidden" data-v-89b7cfe3=""><div i-la-rss-square="" style="font-size:1.25rem;margin:0 -.125rem" data-v-89b7cfe3=""></div></a><a class="select-none" title="Toggle Color Scheme" data-v-89b7cfe3=""><div i-ri-sun-line="" dark:i-ri-moon-line=""></div></a></div></nav></header><main class="px-7 py-10 of-x-hidden"><!--[--><!----><div class="prose m-auto mb-8"><h1 class="mb-0 slide-enter-50">HTTP协议类</h1><p class="opacity-50 !-mt-6 slide-enter-50">Sep 25, 2018<!----></p><!----><!----><!----></div><article class=""><!--[--><div class="prose m-auto slide-enter-content"><h4 id="http简介" tabindex="-1">http简介 <a class="header-anchor" href="#http简介" aria-hidden="true">#</a></h4><p>超文本传输协议（HTTP，HyperText Transfer Protocol)是互联网上应用最为广泛的一种网络协议，是一个客户端和服务器端请求和应答的标准（TCP）。 通常，由HTTP客户端发起一个请求，建立一个到服务器指定端口（默认是80端口）的TCP连接。HTTP服务器则在那个端口监听客户端发送过来的请求。一旦收到请求，服务器（向客户端）发回一个状态行，比如”HTTP/1.1 200 OK”，和（响应的）消息，消息的消息体可能是请求的文件、错误消息、或者其它一些信息。</p><h4 id="http协议的主要特点" tabindex="-1">http协议的主要特点 <a class="header-anchor" href="#http协议的主要特点" aria-hidden="true">#</a></h4><ul><li><p>简单快速 ：HTTP使用统一资源标识符（Uniform Resource Identifiers, URI）来传输数据和建立连接，URL是一种特殊类型的URI。访问某个资源只要输入URI即可。</p></li><li><p>灵活：每个http协议中。有一个头部分，有个数据类型，通过一个http协议的就可以完成不同数据类型的传输。</p></li><li><p>无连接：连接一次就会断开，不会保持连接。</p></li><li><p>无状态：客户端和服务端通信，客户端向服务端发送请求，http建立连接、传输结束后，连接断开，下次客户端再请求数据，服务端是无法区分上次连接和这次连接是否是同一身份，因为服务端没有记住你的状态，从http协议上是无法区分两次连接者的身份。</p></li></ul><h4 id="http报文的组成部分" tabindex="-1">http报文的组成部分 <a class="header-anchor" href="#http报文的组成部分" aria-hidden="true">#</a></h4><ul><li>请求报文：请求行、请求头、空行、请求体</li><li>响应报文：状态行、响应头、空行、响应体</li></ul><p><img src="/images/20240310214516948RBW.png" alt="图片"></p><p>请求报文格式</p><p><img src="/images/20240310214534AyGWUp.png" alt="图片"></p><h5 id="请求报文示例" tabindex="-1">请求报文示例 <a class="header-anchor" href="#请求报文示例" aria-hidden="true">#</a></h5><pre class="shiki shiki-themes github-light github-dark" style="--s-light:#24292e;--s-dark:#e1e4e8;--s-light-bg:#fff;--s-dark-bg:#24292e" tabindex="0"><code class="language-text"><span class="line"><span>GET /build/music/ HTTP/1.1</span></span>
<span class="line"><span>Host: www.ajiu9.com</span></span>
<span class="line"><span>Connection: keep-alive</span></span>
<span class="line"><span>Cache-Control: max-age=0</span></span>
<span class="line"><span>Upgrade-Insecure-Requests: 1</span></span>
<span class="line"><span>User-Agent: Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36</span></span>
<span class="line"><span>Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8</span></span>
<span class="line"><span>Accept-Encoding: gzip, deflate</span></span>
<span class="line"><span>Accept-Language: zh-CN,zh;q=0.9</span></span>
<span class="line"><span>If-None-Match: W/"5ba9f717-234"</span></span>
<span class="line"><span>If-Modified-Since: Tue, 25 Sep 2018 08:51:35 GMT</span></span></code></pre><ul><li><p>第一部分：请求行，用来说明请求类型,要访问的资源以及所使用协议和版本。</p></li><li><p>第二部分：求头部，紧接着请求行（即第一行）之后的部分，用来说明服务器要使用的附加信息。</p></li><li><p>第三部分：空行，请求头部后面的空行是必须的。</p></li><li><p>第四部分：请求数据也叫主体，可以添加任意的其他数据（这个例子的请求数据为空）。</p></li></ul><h5 id="响应报文示例" tabindex="-1">响应报文示例 <a class="header-anchor" href="#响应报文示例" aria-hidden="true">#</a></h5><pre class="shiki shiki-themes github-light github-dark" style="--s-light:#24292e;--s-dark:#e1e4e8;--s-light-bg:#fff;--s-dark-bg:#24292e" tabindex="0"><code class="language-text"><span class="line"><span>HTTP/1.1 304 Not Modified</span></span>
<span class="line"><span>Date: Tue, 25 Sep 2018 08:53:14 GMT</span></span>
<span class="line"><span>Via: 1.1 varnish</span></span>
<span class="line"><span>Cache-Control: max-age=600</span></span>
<span class="line"><span>ETag: W/"5ba9f717-234"</span></span>
<span class="line"><span>Expires: Tue, 25 Sep 2018 09:03:04 GMT</span></span>
<span class="line"><span>Age: 10</span></span>
<span class="line"><span>Connection: keep-alive</span></span>
<span class="line"><span>X-Served-By: cache-tyo19932-TYO</span></span>
<span class="line"><span>X-Cache: HIT</span></span>
<span class="line"><span>X-Cache-Hits: 1</span></span>
<span class="line"><span>X-Timer: S1537865594.266742,VS0,VE0</span></span>
<span class="line"><span>Vary: Accept-Encoding</span></span>
<span class="line"><span>X-Fastly-Request-ID: d33e186dc5ff53c01d8128c32ff8a0f1092c9832</span></span></code></pre><ul><li><p>第一部分：状态行，由HTTP协议版本号， 状态码， 状态消息 三部分组成。</p></li><li><p>第二部分：消息报头，用来说明客户端要使用的一些附加信息</p></li><li><p>第三部分：空行，消息报头后面的空行是必须的。</p></li><li><p>第四部分：响应正文，服务器返回给客户端的文本信息。</p></li></ul><h4 id="http请求方法" tabindex="-1">http请求方法 <a class="header-anchor" href="#http请求方法" aria-hidden="true">#</a></h4><ul><li>get ———— 获取资源</li><li>post ———— 传输资源</li><li>put ———— 更新资源</li><li>delete ———— 删除资源</li><li>head ———— 获得报文首部</li></ul><h4 id="get和post的区别" tabindex="-1">get和post的区别 <a class="header-anchor" href="#get和post的区别" aria-hidden="true">#</a></h4><ul><li><p><code>get在浏览器回退是无害的，而post会再次提交请求</code></p></li><li><p><code>get请求会被浏览器主动缓存，而post不会，除非手动设置</code></p></li><li><p><code>get请求参数会被完整保留在浏览器的历史记录里，而post中的参数不会被保留</code></p></li><li><p><code>get请求中传送的参数是有长度限制的（一般是2kb，不同浏览器不一样），post没有长度限制</code></p></li><li><p><code>get参数通过URL传递，post放在Request body中</code></p></li><li><p>get产生的URL地址可以被收藏，而get不可以</p></li><li><p>get请求只能进行url编码，而post支持多种编码方式</p></li><li><p>对参数的数据类型，get只接受ASCLL字符，而post没有限制</p></li><li><p>get比post更不安全，因为参数直接暴露在URL上，所以不能用来传递敏感信息</p></li></ul><h4 id="http状态码" tabindex="-1">http状态码 <a class="header-anchor" href="#http状态码" aria-hidden="true">#</a></h4><ul><li><p>1xx：指示信息 ——表示请求已接收，继续处理</p></li><li><p>2xx：成功——表示请求已被成功接收</p></li><li><p>3xx：重定向——要完成请求必须进行更进一步的操作</p></li><li><p>4xx：客户端错误——请求有语法错误或请求无法实现</p></li><li><p>5xx：服务端错误——服务器未能实现合法的请求</p></li><li><p>200 OK：客户端请求成功</p></li><li><p>206 Partial Content: 客户发送了一个带Range头的GET请求，服务器完成了它</p></li><li><p>301 Move Parmanently：所请求的页面已经转移到新的url</p></li><li><p>302 Found：所请求的页面已经临时转移至新的url</p></li><li><p>304 Not Modified：客户端有缓冲的文档并发出了一个条件性的请求，服务器告诉客户，原来缓冲的文档还可以继续使用</p></li><li><p>400 Bad Request：客户端请求有语法错误，不能被服务端所理解</p></li><li><p>401 Unauthorized：请求未经授权,这个状态代码必须和WWW-Authenticate报头域一起使用</p></li><li><p>403 Forboidden：对被请求页面的访问被禁止</p></li><li><p>404 NOt Found：请求资源不存在</p></li><li><p>500 Internal Server Error：服务器发送不可预期的错误原来缓冲文档还可以继续使用</p></li><li><p>503 Server Unavailable：请求未完成，服务器临时过载或当机，一段时间后可能恢复正常</p></li></ul><h4 id="持久连接" tabindex="-1">持久连接 <a class="header-anchor" href="#持久连接" aria-hidden="true">#</a></h4><p>HTTP协议采用“请求-应答”模式，当使用普通模式，即非Keep-Alive模式时，每个请求/应答客户和服务器都要新建一个连接，完成 之后立即断开连接（HTTP协议为无连接的协议）； 当使用Keep-Alive模式（又称持久连接、连接重用）时，Keep-Alive功能使客户端到服 务器端的连接持续有效，当出现对服务器的后继请求时，Keep-Alive功能避免了建立或者重新建立连接。</p><p>http 1.0中默认是关闭的，需要在http头加入”Connection: Keep-Alive”，才能启用Keep-Alive； http 1.1中默认启用Keep-Alive，如果加入”Connection: close “，才关闭。</p><p>目前大部分浏览器都是用http1.1协议，也就是说默认都会发起Keep-Alive的连接请求了，所以是否能完成一个完整的Keep-Alive连接就看服务器设置情况。</p><h4 id="管线化" tabindex="-1">管线化 <a class="header-anchor" href="#管线化" aria-hidden="true">#</a></h4><ul><li><p>1.在使用持久连接的情况下，某个连接上消息的传递类似于，请求一次响应一次并且不断开 请求1-&gt; 响应1-&gt;请求2-&gt;响应2-&gt;请求3-&gt;响应3</p></li><li><p>2.管线化通道是持久建立的，把所有请求打包一次传输，所有响应打包一次传输 请求1-&gt;请求2-&gt;请求3-&gt;响应1-&gt;响应2-&gt;响应3</p></li></ul><h4 id="管线化特点" tabindex="-1">管线化特点 <a class="header-anchor" href="#管线化特点" aria-hidden="true">#</a></h4><ul><li><p>管线化机制通过持久连接完成，仅HTTP/1.1支持此技术</p></li><li><p>只有get和head请求可以进行管线化，而post则有所限制</p></li><li><p>初次创建连接是不应启动管线机制，因为对方(服务器)不一定支持HTTP/1.1版本的协议</p></li><li><p>管线化不会影响响应到来的顺序，如上面的例子所示，响应返还的顺序并未改变</p></li><li><p>HTTP/1.1要求服务器端支持管线化，但并不要求服务器端也对响应进行管线化处理，只是要求对于管线化的请求不失败即可</p></li><li><p>由于上面提到的服务器端问题，开启管线化很可能并不会带来大幅度的性能提升，而且很多服务器端和代理程序对管线化的支持并不好，因此现代浏览器如Chrome和Firefox默认并未开启管线化支持</p></li></ul></div><!--]--></article><div class="prose m-auto mt-8 mb-8 slide-enter animate-delay-500 print:hidden"><!----><br><span font-mono="" op50="">&gt; </span><a href="/posts" class="router-link-active font-mono op50 hover:op75"></a></div><!--]--><div class="mt-10 mb-6 prose m-auto flex slide-enter animate-delay-1200!"><span class="text-sm op50">@2024-2025 湘ICP备2024048835号</span><div class="flex-auto"></div></div></main><!----><!--]--></div></body></html>